\chapter{Optimalizace rychlosti}
\label{sec:SpeedOptimization}\

Abychom optimalizovali rychlost je nutné správně rozlišovat různé fáze jízdy. Na
dráze, která je popsaná v~kapitole \ref{sec:PlatformControl}, jsou dvě fáze:

\begin{itemize}
	\item{rovina;}
	\item{zatáčka.}
\end{itemize}

Rozlišujeme to na základě boční rychlosti, tzn. pokud boční rychlost $a$ je menši 
než optimální, jedná se o~jízdě po rovinně, v~opačném případě bude jízda v~zatáčce.

V~zatáčce musíme spočítat takové zpomalení, aby boční rychlost byla co nejblíž 
ke koeficientu. Můžeme to udělat na vzorce optimální boční rychlosti:

\begin{equation}
v = \sqrt{a_{max} * r},
\end{equation}

kde $v$ je optimální zpomalení, $a_{max}$ je maximální boční rychlost a~$r$ je 
poloměr zatáčky. 

Po experimentech pro $a_{max}$ je zvolena hodnota 1,5. Tato hodnota optimálního 
zpomalení byla použita i~pro výpočet zrychlení na rovině.

Poloměr zatáčky můžeme spočítat na základě úhlové rychlosti:

\begin{equation}
r = \frac{v}{\omega},
\end{equation}

kde $v$ je rychlost auta a~$w$ je úhlová rychlost.

Hodnoty pro boční zrychlení a~úhlovou rychlost dostaneme z~$A_y$ a~$\Omega_z$. 
$A_y$ je zobrazena na~obrázku~\ref{fig:FXOS_Orientation}.  $\Omega_z$ je zobrazena 
na obrázku \ref{fig:FXAS_Orientation}. Tyto hodnoty před použitím je potřeba 
zkonvertovat ze surových hodnot.

Pro konvertování $A_y$ byl použit vzorec:

\begin{equation}
a = \frac{A_y * k * g}{A_{max}},
\end{equation}

kde $a$ je boční zrychlení, $A_y$ je surová hodnota akcelerometru osy y,
$k$ je rozsah akcelerometru,  $g$~je konstanta gravitačního zrychlení a~$A_{max}$ 
je maximální 14bitová surová hodnota se znaménkem.

Pro konfigurace akcelerometru, která je popsaná v~kapitole \ref{sec:Sensors}, 
byl zvolen koeficient $k$ = 4, $g$~=~9,8 a~$A_{max}$ je 8191.

Pro konvertování $\Omega_z$ byl použit vzorec:

\begin{equation}
\omega = \Omega_z * k * \frac{\pi}{180},
\end{equation}

kde $\omega$ je úhlová rychlost, $\Omega_z$ je surová hodnota gyroskopu osy
z~a~$k$ je citlivost senzoru ve stupních za sekundu. 

Pro konfiguraci gyroskopu, která je popsaná v~kapitole \ref{sec:Sensors}, 
byla použita hodnota $k$~= 0,03125.

\endinput