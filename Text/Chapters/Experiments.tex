\chapter{Experimenty}
\label{sec:Experiments}
\vspace{-20pt}
\

V této kapitole otestován algoritmus optimalizace rychlosti na draze, 
která je popsaná v kapitole~\ref{sec:PlatformControl}, a porovnán s manuálním
řízením. 

Pro porovnání potřebujeme spočítat za kolik ticku auto projelo jedno kolo. 
Na to můžeme využit data bočního zrychlení, která je zobrazená na obrázku \ref{fig:Laps}.
Levý obrázek je zrychlení automatického řízení a právy obrázek je zrychlení 
manuálního řízení.

\begin{figure}[!h]
    \centering
    \subfloat[Automatické řízení]{\includegraphics[width = .5\textwidth]{Figures/LapAuto.png}\label{fig:LapsAuto}}
    \subfloat[Manuální řízení]{\includegraphics[width = .5\textwidth]{Figures/LapManual.png}\label{fig:LapsManual}}
    \caption{Boční zrychlení během experimentů.}
    \label{fig:Laps}
\end{figure}

Pro
to implementován algoritmus prahování, kde pro každý datový bod algoritmus zjišťuje hodnotu 
úhlové rychlosti z gyrozkopu na ose z. Pokud tato hodnota překročí prahovou hodnotu, a 
zároveň nebyl ještě zaznamenán polokruh, algoritmus zaznamená časovou známku detekce jako 
počátek polokruhu. Pokud hodnota úhlové rychlosti klesne pod prahovou hodnotu 
a byl již zaznamenán polokruh, znamená to, že byl detekován úplný kruh. 
Algoritmus poté zvýší počet detekovaných kol o jednu.
Tento proces se opakuje pro každý datový bod, čímž algoritmus umožňuje sledování a 
počítání kol na základě úhlové rychlosti zaznamenané gyroskopem.
Algoritmus je ve výpisu:
\begin{lstlisting}[
	caption=Počet kol,
	label=lst:countLap
]
threshold = 3000
half_lap_detected = False
lap_count = 0
laps = []

for data_point in data:
    if data_point.sensor.gyro.z >= threshold and not half_lap_detected:
        laps.append((lap_count, data_point.timestamp))
        half_lap_detected = True
    elif data_point.sensor.gyro.z <= -threshold and half_lap_detected:
        lap_count += 1
        half_lap_detected = False
\end{lstlisting}

Porovnání automatického a manuálního řízení je v tabulce \ref{tab:Comparison}.
\begin{table}[!h]
    \centering
    \begin{tabular}{cccc}
        \hline
        \textbf{Metoda řízení} & \textbf{1 Kolo} & \textbf{2 Kolo} & \textbf{3 Kolo} \\
        \hline
        Automatické           & 942       & 562 & 343          \\
        Manuální 			  & 1178       & 1085 & 1161           \\
        \hline
    \end{tabular}
    \caption{Porovnání manuálního a automatického řízení.}
    \label{tab:Comparison}
\end{table}

Z toho vidíme že automatické řízení je mnohem rychlejší než manuální.
\endinput
